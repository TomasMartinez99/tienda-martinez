(this["webpackJsonptienda-martinez"]=this["webpackJsonptienda-martinez"]||[]).push([[0],{34:function(e,t,c){},41:function(e,t,c){},46:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=(c(34),c(4)),r=c(5),i=c(13),o=c(7),j=c(1),l=function(e){var t=e.smartwatch;return Object(j.jsxs)("article",{className:"item col-3",children:[Object(j.jsx)("img",{src:t.pictureUrl,alt:t.alt}),Object(j.jsx)("h3",{children:t.title}),Object(j.jsxs)("h4",{children:["$",t.price]}),Object(j.jsx)(s.b,{className:"verMas",to:"/item/".concat(t.id),children:"Ver m\xe1s"})]})},d=c.p+"static/media/loader.f1b77848.gif",b=function(){return Object(j.jsx)("div",{className:"loader",children:Object(j.jsx)("img",{src:d,alt:"loading"})})},u=function(e){var t=e.watchesToShow;return Object(j.jsx)(j.Fragment,{children:0===t.length?Object(j.jsx)("div",{className:"LoaderContainer",children:Object(j.jsx)(b,{})}):Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("h2",{className:"tituloInicio",children:"Eleg\xed tu pr\xf3ximo reloj inteligente"}),Object(j.jsx)("div",{className:"smartwatchesContainer",children:t.map((function(e,t){return Object(j.jsx)(l,{smartwatch:e},t)}))})]})})},h=c(20),m=(c(30),h.a.initializeApp({apiKey:"AIzaSyDBUY51R5vyciwP5aU3rv5-fLJF4GZbFho",authDomain:"tienda-martinez.firebaseapp.com",projectId:"tienda-martinez",storageBucket:"tienda-martinez.appspot.com",messagingSenderId:"903181180205",appId:"1:903181180205:web:632e3b8b14e2e330c3c7a4"}).firestore()),O=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1],s=Object(r.g)().categoryId;return Object(a.useEffect)((function(){var e=m.collection("products");void 0===s?e.get().then((function(e){0===e.size&&alert("No hay resultados");var t=e.docs.map((function(e){return Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id})}));n(t)})):e.where("brand","==",s).get().then((function(e){var t=e.docs.map((function(e){return Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id})}));n(t)}))}),[s]),Object(j.jsx)("div",{className:"main",children:Object(j.jsx)(u,{watchesToShow:c})})},x=function(e){var t=e.stock,c=e.itemCount,a=e.setItemCount;return Object(j.jsx)("div",{className:"count",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{className:"btnMenos",onClick:function(e){c>1&&a(c-1)},children:"-"}),Object(j.jsxs)("h2",{children:[" ",c," "]}),Object(j.jsx)("button",{className:"btnMas",onClick:function(e){c<t&&a(c+1)},children:"+"})]})})},f=c(28),p=n.a.createContext([]),g=function(e){var t=e.children,c=Object(a.useState)(0),n=Object(o.a)(c,2),s=n[0],r=n[1],i=Object(a.useState)([]),l=Object(o.a)(i,2),d=l[0],b=l[1],u=Object(a.useState)(""),h=Object(o.a)(u,2),m=(h[0],h[1]);return Object(j.jsx)(p.Provider,{value:{aggregateItems:d,setAggregateItems:b,addItem:function(e,t){var c=e.id,a=Object(f.a)(d),n=a.find((function(e){return e.smartwatch.id===c}));if(n){var i=n.itemCount;n.itemCount=i+t,b(a),r(s+t)}else b([].concat(Object(f.a)(d),[{smartwatch:e,itemCount:t}])),r(s+t)},quantity:s,setQuantity:r,clear:function(){b([]),r(0),m("")},updateOrderData:function(e){m(e)}},children:t})},v=function(e){var t=e.smartwatch;return Object(j.jsxs)("article",{className:"itemDetail col-12",children:[Object(j.jsx)("div",{className:"imgProduct col-6 col-lg-5",children:Object(j.jsx)("img",{src:t.pictureUrl,alt:t.alt})}),Object(j.jsxs)("div",{className:"detail col-4 col-lg-7",children:[Object(j.jsx)("h3",{children:t.title}),Object(j.jsxs)("h4",{children:["$",t.price]})]})]})},N=function(e){var t=e.smartwatch,c=Object(a.useState)(!0),n=Object(o.a)(c,2),r=n[0],i=n[1],l=Object(a.useState)(1),d=Object(o.a)(l,2),b=d[0],u=d[1],h=Object(a.useContext)(p).addItem;return Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"smartwatchesContainer",children:[Object(j.jsx)(v,{smartwatch:t}),Object(j.jsx)("div",{className:"addCart",children:r?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"btn",onClick:function(){return i(!1)},children:"Agregar al carrito"}),Object(j.jsx)(x,{stock:t.stock,itemCount:b,setItemCount:u})]}):Object(j.jsxs)("div",{className:"cancelarConfirmarContainer",children:[Object(j.jsx)("button",{className:"btn",onClick:function(){return i(!0)},children:"Cancelar"}),Object(j.jsx)(s.b,{className:"btn btn-confirmar",onClick:function(){return h(t,b)},to:"/cart",children:"Confirmar compra"})]})})]})})},C=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1],s=Object(r.g)().itemId;return Object(a.useEffect)((function(){m.collection("products").doc(s).get().then((function(e){e.exists?n(Object(i.a)({id:e.id},e.data())):alert("No hay resultados")})).catch((function(e){console.log("Error buscando items",e)}))}),[]),Object(j.jsx)("div",{className:"main",children:Object(j.jsx)(N,{smartwatch:c})})},w=function(e){var t=Object(a.useContext)(p),c=t.aggregateItems,n=t.setAggregateItems,s=Object(a.useContext)(p),r=s.quantity,i=s.setQuantity,o=e.itemCount,l=e.smartwatch.title,d=e.smartwatch.price,b=e.smartwatch.pictureUrl,u=e.smartwatch.id,h=e.smartwatch.alt;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{src:b,alt:h}),Object(j.jsxs)("div",{className:"detail",children:[Object(j.jsx)("h3",{children:l}),Object(j.jsx)("h4",{className:"price",children:"Precio unitario: $".concat(d)}),Object(j.jsx)("h4",{children:"Cantidad: ".concat(o)}),Object(j.jsx)("div",{onClick:function(){return function(e){var t=c.find((function(t){return t.smartwatch.id===e}));i(r-t.itemCount),n(c.filter((function(t){return t.smartwatch.id!==e})))}(u)},children:Object(j.jsx)("button",{className:"btn btn-outline-danger",children:"Borrar"})})]})]}),Object(j.jsx)("hr",{})]})},y=function(e){var t=e.aggregateItems,c=e.itemsPrice,n=e.clear,s=Object(a.useContext)(p).updateOrderData,l=Object(a.useState)(""),d=Object(o.a)(l,2),b=d[0],u=d[1],O=Object(a.useState)(""),x=Object(o.a)(O,2),f=x[0],g=x[1],v=Object(a.useState)(""),N=Object(o.a)(v,2),C=N[0],w=N[1],y=Object(a.useState)(!1),I=Object(o.a)(y,2),S=I[0],k=I[1],T=Object(a.useState)(""),F=Object(o.a)(T,2),M=F[0],D=F[1];return Object(j.jsx)(j.Fragment,{children:S?Object(j.jsx)(r.a,{to:"/purchaseMade/".concat(M)}):Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a={name:b,phone:f,mail:C},r=m.collection("products").where(h.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.smartwatch.id}))),o=function(e){return{buyer:e,items:t,date:h.a.firestore.Timestamp.fromDate(new Date),total:c}};r.get().then((function(e){var c=m.batch(),r=[];e.docs.forEach((function(e,a){e.data().stock>=t[a].itemCount?c.update(e.ref,{stock:e.data().stock-t[a].itemCount}):r.push(Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id}))})),0===r.length&&c.commit().then((function(){m.collection("orders").orderBy("date","desc").limit(1).get().then((function(e){D(e.docs[0].id),function(e){var t=o(e),c=m.collection("orders");try{c.add(t).then((function(e){s(e.id)}))}catch(a){alert("Error al generar la compra")}}(a),k(!0),n()}))}))}))},children:[Object(j.jsxs)("p",{children:[Object(j.jsx)("label",{children:"Nombre:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{value:b,onChange:function(e){return u(e.target.value)},placeholder:"Tomas Martinez",id:"name",type:"text",autoComplete:"name",enterKeyHint:"next",required:!0,autoFocus:!0})]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("label",{children:"Tel\xe9fono:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{value:f,onChange:function(e){return g(e.target.value)},placeholder:"+54 261 542389",id:"phone",type:"tel",autoComplete:"phone",enterKeyHint:"next"})]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("label",{children:"Mail:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{value:C,onChange:function(e){return w(e.target.value)},placeholder:"ejemplo@ejemplo.com",id:"mail",type:"email",autoComplete:"email",enterKeyHint:"next"})]}),Object(j.jsx)("button",{className:"btn btn-outline-success",type:"submit",disabled:""===b||""===f||""===C,children:"Finalizar Compra"})]})})},I=function(){var e=Object(a.useContext)(p).aggregateItems,t=Object(a.useContext)(p).clear,c=Object(a.useState)(0),n=Object(o.a)(c,2),s=n[0],r=n[1];return Object(a.useEffect)((function(){var t=e.reduce((function(e,t){return e+t.smartwatch.price*t.itemCount}),0);r(t)}),[e]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"cart",children:0===e.length?Object(j.jsxs)("div",{className:"carritoVacio",children:[Object(j.jsx)("h3",{children:"No hay art\xedculos agregados al carrito"}),Object(j.jsx)("h4",{children:"\xa1Muchos productos te esperan!"})]}):Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-12 col-md-6 itemsDetail",children:[Object(j.jsx)("h2",{children:"Mi carrito"}),e.map((function(e){return Object(j.jsx)(w,Object(i.a)({},e),e.smartwatch.id)})),Object(j.jsxs)("div",{className:"clearAndTotal",children:[Object(j.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){return t()},children:"Vaciar carrito"}),Object(j.jsxs)("h3",{className:"total",children:["Total: $",s]})]})]}),Object(j.jsx)("section",{className:"col-12 col-md-6 form",children:Object(j.jsxs)("div",{className:"userInfo",children:[Object(j.jsx)("h2",{children:"Mis Datos"}),Object(j.jsx)(y,{aggregateItems:e,itemsPrice:s,clear:t})]})})]})})})},S=(c(41),function(e){return Object(j.jsxs)("div",{className:"emptyPage",children:[Object(j.jsx)("h1",{children:e.h1}),Object(j.jsx)("p",{children:e.extraInfo}),Object(j.jsx)(s.b,{to:e.link,children:Object(j.jsx)("button",{className:"btn btn-outline-primary",children:e.btnText})})]})}),k=function(){var e=Object(r.g)().orderId;return Object(j.jsx)("div",{children:Object(j.jsx)(S,{className:"purchaseMade",h1:"\xa1Gracias por Tu Compra!",link:"/",extraInfo:"El c\xf3digo de tu pedido es ".concat(e,", pronto recibir\xe1s un mail confirmando el env\xedo."),btnText:"Volver al inicio"})})},T=function(){return Object(j.jsxs)(r.d,{children:[Object(j.jsx)(r.b,{exact:!0,path:"/",component:O}),Object(j.jsx)(r.b,{exact:!0,path:"/category/:categoryId",component:O}),Object(j.jsx)(r.b,{exact:!0,path:"/item/:itemId",component:C}),Object(j.jsx)(r.b,{exact:!0,path:"/cart",component:I}),Object(j.jsx)(r.b,{path:"/purchaseMade/:orderId",children:Object(j.jsx)(k,{})}),Object(j.jsxs)(r.b,{path:"/",children:[Object(j.jsx)("h2",{children:"Error, p\xe1gina no encontrada"}),Object(j.jsx)(s.b,{to:"/",children:"Volver al inicio"})]})]})},F=function(e){var t=Object(a.useContext)(p).quantity;return Object(j.jsx)("div",{className:"carritoContenedor",children:Object(j.jsxs)(s.b,{to:"/cart",children:[Object(j.jsx)("div",{className:"contador",children:Object(j.jsxs)("p",{children:[" ",t," "]})}),Object(j.jsx)("i",{className:"fas fa-shopping-bag"})]})})},M=function(){return Object(j.jsx)("header",{children:Object(j.jsxs)("div",{className:"fixed",children:[Object(j.jsxs)("nav",{className:"menu",children:[Object(j.jsx)("div",{className:"logo",children:Object(j.jsx)(s.b,{to:"/",children:Object(j.jsx)("p",{children:"Timeshop"})})}),Object(j.jsxs)("div",{className:"buscador",children:[Object(j.jsx)("input",{type:"text",placeholder:"Buscar..."}),Object(j.jsx)("i",{className:"fas fa-search"})]}),Object(j.jsxs)("ul",{className:"enlaces",children:[Object(j.jsx)("li",{children:Object(j.jsx)(s.c,{to:"/",activeClassName:"active",children:"Inicio"})}),Object(j.jsx)("li",{children:Object(j.jsx)(s.c,{to:"/category/".concat("samsung"),activeClassName:"active",children:"Samsung"})}),Object(j.jsx)("li",{children:Object(j.jsx)(s.c,{to:"/category/".concat("apple"),activeClassName:"active",children:"Apple"})}),Object(j.jsx)("li",{children:Object(j.jsx)(s.c,{to:"/category/".concat("xiaomi"),activeClassName:"active",children:"Xiaomi"})})]}),Object(j.jsx)(F,{}),Object(j.jsx)("div",{className:"btn btn-outline-light",children:"Iniciar sesi\xf3n"})]}),Object(j.jsxs)("div",{className:"buscador-2",children:[Object(j.jsx)("input",{type:"text",placeholder:"Buscar..."}),Object(j.jsx)("i",{className:"fas fa-search"})]})]})})},D=function(){return Object(j.jsx)("footer",{children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-8 col-md-6 nombreTienda",children:Object(j.jsx)("p",{children:"\xa92021 Timeshop - Todos los derechos reservados"})}),Object(j.jsxs)("div",{className:"col-4 col-md-6 redes",children:[Object(j.jsx)("i",{className:"fab fa-facebook"}),Object(j.jsx)("i",{className:"fab fa-instagram"})]})]})})};var z=function(){return Object(j.jsx)(g,{children:Object(j.jsxs)(s.a,{children:[Object(j.jsx)(M,{}),Object(j.jsx)(T,{}),Object(j.jsx)(D,{})]})})},E=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,47)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))},P=c(32),B=c.n(P);c(45);B.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(z,{})}),document.getElementById("root")),E()}},[[46,1,2]]]);
//# sourceMappingURL=main.e87fd3ab.chunk.js.map